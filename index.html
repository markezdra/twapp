<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocab Trainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* СПЛЭШ */
    #splash {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: #fff; opacity: 0;
      transition: opacity 2s ease-in-out;
      z-index: 50;
    }
    #splash.visible { opacity: 1; }
    #splash.hiding { opacity: 0; transition: opacity 1s ease-in-out; }

    /* ЭКРАНЫ */
    .screen {
      position: absolute; inset: 0;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      background: #fff;
    }
    .screen.visible {
      display: flex;
    }

    /* АНІМАЦІЯ ЮНІТІВ */
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.5); }
      to   { opacity: 1; transform: scale(1); }
    }
    .unit-button { opacity: 0; }
    .unit-button.show { animation: popIn 0.4s forwards; }

    /* СПИСОК ЮНІТІВ */
    #unitsContent {
      overflow-y: auto;
    }
  </style>
</head>
<body class="bg-white text-orange-500 relative overflow-hidden">

  <!-- СПЛЭШ -->
  <div id="splash">
    <img src="logo.png" alt="Logo" class="w-32 h-auto"/>
  </div>

  <!-- ЭКРАН ВЫБОРА КЛАССА -->
  <div id="mainContent" class="screen">
    <h1 class="text-3xl font-bold mb-6 text-center">Select Your Grade</h1>
    <div id="grades" class="flex flex-wrap justify-center gap-4">
      <!-- Кнопки классов -->
      <button data-grade="5"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">5 Grade</button>
      <button data-grade="6"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">6 Grade</button>
      <button data-grade="7"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">7 Grade</button>
      <button data-grade="8"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">8 Grade</button>
      <button data-grade="9"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">9 Grade</button>
      <button data-grade="10" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">10 Grade</button>
      <button data-grade="11" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">11 Grade</button>
    </div>
  </div>

  <!-- ЭКРАН СПИСКА ЮНІТІВ -->
  <div id="unitsContent" class="screen">
    <h1 id="unitsTitle" class="text-3xl font-bold mb-6 text-center">Units</h1>
    <div id="units" class="flex flex-col gap-4 w-full max-w-md mx-auto mb-10" style="max-height:60vh;">
      <!-- Сюда JS вставит 18 кнопок -->
    </div>
    <button id="backButton" class="px-4 py-2 border-2 border-gray-400 rounded hover:bg-gray-200 transition">← Back</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Здесь вручную задайте по 18 названий юнитов для каждого класса
    const gradeUnitsMap = {
      "5": [
        /* 18 названий для 5 Grade */
        "Numbers and Operations",
        "Algebra Foundations",
        "Geometry Basics",
        "Ratios and Proportions",
        "Integers",
        "Expressions",
        "Linear Equations",
        "Inequalities",
        "Polynomials",
        "Coordinate Geometry",
        "Functions",
        "Statistics",
        "Probability",
        "Exponents and Roots",
        "Quadratic Equations",
        "Systems of Equations",
        "Sequences and Series",
        "Data Analysis"
      ],
      "6": [/* 18 названий для 6 Grade */],
      "7": [/* ... */],
      "8": [/* ... */],
      "9": [/* ... */],
      "10": [/* ... */],
      "11": [/* ... */]
    };

    const splash       = document.getElementById("splash");
    const mainContent  = document.getElementById("mainContent");
    const unitsContent = document.getElementById("unitsContent");
    const unitsDiv     = document.getElementById("units");
    const unitsTitle   = document.getElementById("unitsTitle");
    const backButton   = document.getElementById("backButton");

    window.addEventListener("DOMContentLoaded", ()=>{
      // splash fade-in 2s
      setTimeout(()=> splash.classList.add("visible"), 0);
      // hold then fade-out at 4s
      setTimeout(()=>{
        splash.classList.remove("visible"); splash.classList.add("hiding");
      }, 4000);
      // at 5s show mainContent
      setTimeout(()=>{
        splash.style.display = "none";
        showScreen(mainContent);
      }, 5000);
    });

    // Показать заданный экран
    function showScreen(screen) {
      [mainContent, unitsContent].forEach(s => {
        s.classList.remove("visible"); s.style.display = "none";
      });
      screen.style.display = "flex";
      setTimeout(()=> screen.classList.add("visible"), 50);
    }

    // При клике на класс
    document.querySelectorAll("#grades button").forEach(btn=>{
      btn.onclick = () => {
        const grade = btn.dataset.grade;
        showUnits(grade);
      };
    });

    // Показать список юнитов для класса
    function showUnits(grade) {
      // очищаем контейнер
      unitsDiv.innerHTML = "";
      unitsTitle.textContent = `Units for Grade ${grade}`;
      // создаем 18 кнопок
      const list = gradeUnitsMap[grade] || [];
      for(let i=0; i<18; i++){
        const name = list[i] || `Unit ${i+1}`;
        const btn = document.createElement("button");
        btn.textContent = name;
        btn.className = "unit-button px-5 py-3 w-full text-left border-2 border-orange-500 rounded";
        btn.onclick = () => tg.sendData(JSON.stringify({grade, unit: i+1}));
        unitsDiv.appendChild(btn);
        setTimeout(()=> btn.classList.add("show"), i*100);
      }
      // показать экран юнитов
      showScreen(unitsContent);
    }

    // Назад к классам
    backButton.onclick = () => showScreen(mainContent);
  </script>
</body>
</html>
