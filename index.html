<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocab Trainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* СПЛЭШ */
    #splash {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      opacity: 0;
      transition: opacity 2s ease-in-out;
      z-index: 50;
    }
    #splash.visible {
      opacity: 1;
      transition: opacity 2s ease-in-out;
    }
    #splash.hiding {
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    /* КОНТЕНТ */
    #mainContent, #unitsContent {
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    #mainContent.visible, #unitsContent.visible {
      display: flex;
      opacity: 1;
    }

    /* ЭКРАН СПИСКА ЮНИТОВ: прокрутка */
    #unitsContent {
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 1rem;
      min-height: 100vh;
      overflow-y: auto;
    }

    /* Анимация появления юнитов */
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.5); }
      to   { opacity: 1; transform: scale(1); }
    }
    .unit-button {
      opacity: 0;
    }
    .unit-button.show {
      animation: popIn 0.4s forwards;
    }
  </style>
</head>
<body class="bg-white text-orange-500 overflow-hidden flex flex-col items-center justify-center">

  <!-- СПЛЭШ -->
  <div id="splash">
    <img src="logo.png" alt="Logo" class="w-32 h-auto" />
  </div>

  <!-- ЭКРАН ВЫБОРА КЛАССА -->
  <div id="mainContent" class="flex flex-col items-center justify-center min-h-screen p-4">
    <h1 class="text-3xl font-bold mb-6 text-center">Select Your Grade</h1>
    <div id="grades" class="flex flex-wrap justify-center gap-4">
      <button data-grade="5"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">5 Grade</button>
      <button data-grade="6"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">6 Grade</button>
      <button data-grade="7"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">7 Grade</button>
      <button data-grade="8"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">8 Grade</button>
      <button data-grade="9"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">9 Grade</button>
      <button data-grade="10" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">10 Grade</button>
      <button data-grade="11" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">11 Grade</button>
    </div>
  </div>

  <!-- ЭКРАН СПИСКА ЮНИТОВ -->
  <div id="unitsContent" class="flex flex-col items-center" style="display: none; opacity: 0;">
    <h1 id="unitsTitle" class="text-3xl font-bold mb-6 text-center">Units for Grade</h1>
    <div id="units" class="flex flex-col gap-4 w-full max-w-md mb-10"></div>
    <button id="backToGrades" class="px-4 py-2 border-2 border-gray-400 rounded hover:bg-gray-200 transition">← Back to Grades</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Данные: 18 юнитов для каждого класса
    // Определите названия 18 юнитов для каждого класса:
    const gradeUnitsMap = {
      "5": [
        /* 18 названий для 5 класса */
        "Numbers and Operations",
        "Algebra Foundations",
        "Geometry Basics",
        "Proportions and Ratios",
        "Integers",
        "Expressions",
        "Linear Equations",
        "Inequalities",
        "Polynomials",
        "Factorization",
        "Coordinate Plane",
        "Statistics Intro",
        "Probability Basics",
        "Functions",
        "Graphing Functions",
        "Transformations",
        "Systems of Equations",
        "Review 5th Grade"
      ],
      "6": [
        /* 18 названий для 6 класса */
        "Rational Numbers",
        "Exponents",
        "Radicals",
        "Expressions and Equations",
        "Ratios and Rates",
        "Proportional Relationships",
        "Geometry Basics",
        "Area and Perimeter",
        "Surface Area and Volume",
        "Statistics and Data",
        "Probability",
        "Integers",
        "Absolute Value",
        "Inequalities",
        "Coordinate Geometry",
        "Functions Intro",
        "Transformations",
        "Review 6th Grade"
      ],
      // аналогично определите для классов 7–11 ниже
      "7": [/* 18 названий для 7 класса */],
      "8": [/* 18 названий для 8 класса */],
      "9": [/* 18 названий для 9 класса */],
      "10": [/* 18 названий для 10 класса */],
      "11": [/* 18 названий для 11 класса */]
    };
    , (_, i) => `Unit ${i+1}`);
    }

    const splash = document.getElementById('splash');
    const mainContent = document.getElementById('mainContent');
    const unitsContent = document.getElementById('unitsContent');
    const grades = document.getElementById('grades');
    const unitsDiv = document.getElementById('units');
    const unitsTitle = document.getElementById('unitsTitle');
    const backBtn = document.getElementById('backToGrades');

    window.addEventListener('DOMContentLoaded', () => {
      // Fade-in splash 0–2s
      setTimeout(() => splash.classList.add('visible'), 0);
      // Hold until 4s, then fade-out 4–5s
      setTimeout(() => {
        splash.classList.remove('visible');
        splash.classList.add('hiding');
      }, 4000);
      // At 5s, hide splash and show main
      setTimeout(() => {
        splash.style.display = 'none';
        showMain();
      }, 5000);
    });

    function showMain() {
      unitsContent.classList.remove('visible');
      unitsContent.style.display = 'none';
      mainContent.style.display = 'flex';
      setTimeout(() => mainContent.classList.add('visible'), 50);
      attachGradeHandlers();
    }

    function attachGradeHandlers() {
      grades.querySelectorAll('button').forEach(btn => {
        btn.onclick = () => showUnits(btn.dataset.grade);
      });
    }

    function showUnits(grade) {
      unitsDiv.innerHTML = '';
      unitsTitle.textContent = `Units for Grade ${grade}`;
      mainContent.classList.remove('visible');
      setTimeout(() => {
        mainContent.style.display = 'none';
        unitsContent.style.display = 'flex';
        unitsContent.classList.add('visible');

        // Generate 18 unit buttons
        gradeUnitsMap[grade].forEach((name, idx) => {
          const btn = document.createElement('button');
          btn.textContent = name;
          btn.dataset.unitIndex = idx+1;
          btn.className = 'unit-button px-5 py-3 w-full text-left border-2 border-orange-500 rounded';
          btn.onclick = () => tg.sendData(JSON.stringify({ grade, unit: idx+1 }));
          unitsDiv.appendChild(btn);
          setTimeout(() => btn.classList.add('show'), idx * 100);
        });

        backBtn.onclick = showMain;
      }, 500);
    }
  </script>
</body>
</html>
