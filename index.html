<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocab Trainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* СПЛЭШ: изначально прозрачный */
    #splash {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: #fff; opacity: 0;
      transition: opacity 2s ease-in-out; z-index: 50;
    }
    #splash.visible {
      opacity: 1; transition: opacity 2s ease-in-out;
    }
    #splash.hiding {
      opacity: 0; transition: opacity 1s ease-in-out;
    }

    /* Основной, экран юнитов и меню: изначально скрыты, плавное появление */
    #mainContent, #unitsContent, #menuContent {
      opacity: 0; transition: opacity 1s ease-in-out;
      display: none;
    }
    #mainContent.visible,
    #unitsContent.visible,
    #menuContent.visible {
      display: flex; opacity: 1;
    }

    /* Экран юнитов: прокрутка */
    #unitsContent {
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh; padding: 1rem;
      overflow-y: auto; gap: 1rem;
    }

    /* Экран меню юнита */
    #menuContent {
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh; padding: 1rem;
      gap: 1rem;
    }

    /* Анимация кнопок юнитов */
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.5); }
      to   { opacity: 1; transform: scale(1); }
    }
    .unit-button { opacity: 0; }
    .unit-button.show {
      animation: popIn 0.4s forwards;
    }

    /* Позиционирование стрелок «назад» */
    .back-arrow {
      position: fixed;
      top: 1rem;
      left: 1rem;
      font-size: 1.5rem;
      z-index: 1000;
      background: transparent;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body class="bg-white text-orange-500 overflow-hidden">

  <!-- СПЛЭШ-СКРИН -->
  <div id="splash">
    <img src="logo.png" alt="Logo" class="w-32 h-auto">
  </div>

  <!-- ОСНОВНОЙ КОНТЕНТ: Выбор класса -->
  <div id="mainContent" class="flex flex-col items-center justify-center min-h-screen p-4">
    <h1 class="text-3xl font-bold mb-6">Select Your Grade</h1>
    <div id="grades" class="flex flex-wrap justify-center gap-4 mb-10">
      <button data-grade="5"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">5 Grade</button>
      <button data-grade="6"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">6 Grade</button>
      <button data-grade="7"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">7 Grade</button>
      <button data-grade="8"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">8 Grade</button>
      <button data-grade="9"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">9 Grade</button>
      <button data-grade="10" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">10 Grade</button>
      <button data-grade="11" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">11 Grade</button>
    </div>
  </div>

  <!-- ЭКРАН ЮНИТОВ -->
  <div id="unitsContent" class="flex flex-col items-center justify-start p-4" style="overflow-y:auto; max-height:100vh; gap:1rem;">
    <!-- Стрелка «назад» -->
    <button id="backToGrades" class="back-arrow">←</button>

    <h1 id="unitsTitle" class="text-3xl font-bold mt-8 mb-4 text-center">Units for Grade X</h1>
    <div id="units" class="flex flex-col items-center gap-4 w-full max-w-md">
      <!-- JS вставит сюда 18 кнопок -->
    </div>
  </div>

  <!-- ЭКРАН МЕНЮ ЮНИТА -->
  <div id="menuContent" class="flex flex-col items-center justify-center p-4" style="gap:1rem;">
    <!-- Стрелка «назад» -->
    <button id="btn-backToUnits" class="back-arrow">←</button>

    <h1 id="menuTitle" class="text-3xl font-bold text-center">Unit Menu</h1>
    <button id="btn-vocab" class="px-6 py-3 w-full text-center border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">Vocabulary</button>
    <button id="btn-l1"    class="px-6 py-3 w-full text-center border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">LEVEL 1</button>
    <button id="btn-l2"    class="px-6 py-3 w-full text-center border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">LEVEL 2</button>
    <button id="btn-l3"    class="px-6 py-3 w-full text-center border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">LEVEL 3</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Вручную впишите по 18 названий для каждого класса
const gradeUnitsMap = {
      "5": [
        "1. The number system",
        "2. 2D shape and pattern",
        "3. Numbers and sequences",
        "4. Averages",
        "5. Addition and subtraction",
        "6. 3D shapes",
        "7. Fractions, decimals and percentages",
        "8. Probability",
        "9. Addition and subtraction of fractions",
        "10. Angles",
        "11. Multiplication and division",
        "12. Data",
        "13. Ratio and proportion",
        "14. Area and perimeter",
        "15. Multiplying and dividing fractions and decimals",
        "16. Time",
        "17. Number and the laws of arithmetic",
        "18. Position and direction"
      ],
      "6": [
        "1. The number system",
        "2. Numbers and sequences",
        "3. Averages",
        "4. Addition and subtraction (1)",
        "5. 2D shapes",
        "6. Fractions and percentages",
        "7. Exploring measures",
        "8. Addition and subtraction (2)",
        "9. Probability",
        "10. Multiplication and division (1)",
        "11. 3D shapes",
        "12. Ratio and proportion",
        "13. Angles",
        "14. Multiplication and division (2)",
        "15. Data",
        "16. The laws of arithmetic",
        "17. Transformations",
        "18. Review 6th Grade"
      ],
      "7": [
        "1. Integers",
        "2. Expressions, formulae and equations",
        "3. Place value and rounding",
        "4. Decimals",
        "5. Angles and constructions",
        "6. Collecting data",
        "7. Fractions",
        "8. Shapes and symmetry",
        "9. Sequences and functions",
        "10. Percentages",
        "11. Graphs",
        "12. Ratio and proportion",
        "13. Probability",
        "14. Position and transformation",
        "15. Shapes, area and volume",
        "16. Interpreting and discussing results",
        "17. Advanced Topics 7",
        "18. Final Review 7"
      ],
      "8": [
        "підручників 8 10 11 не знайшов, інші додав",
      ],
      "9": [
        "1. Number and calculation",
        "2. Expressions and formulae",
        "3. Decimals, percentages and rounding",
        "4. Equations and inequalities",
        "5. Angles",
        "6. Statistical investigations",
        "7. Shapes and measurements",
        "8. Fractions",
        "9. Sequences and functions",
        "10. Graphs",
        "11. Ratio and proportion",
        "12. Probability",
        "13. Position and transformation",
        "14. Volume, surface area and symmetry",
        "15. Interpreting and discussing results",
        "16. Review 9th Grade",
        "17. Exam Prep 9",
        "18. Final Review 9"
      ],
      "10": [
        "підручників 8 10 11 не знайшов, інші додав"
      ],
      "11": [
        "підручників 8 10 11 не знайшов, інші додав"
      ]
    };

    const splash       = document.getElementById("splash");
    const main         = document.getElementById("mainContent");
    const unitsContent = document.getElementById("unitsContent");
    const menuContent  = document.getElementById("menuContent");
    const gradesDiv    = document.getElementById("grades");
    const unitsDiv     = document.getElementById("units");
    const unitsTitle   = document.getElementById("unitsTitle");
    const menuTitle    = document.getElementById("menuTitle");
    const backToGrades = document.getElementById("backToGrades");
    const backToUnits  = document.getElementById("btn-backToUnits");

    window.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => splash.classList.add("visible"), 0);
      setTimeout(() => { splash.classList.remove("visible"); splash.classList.add("hiding"); }, 4000);
      setTimeout(() => {
        splash.style.display = "none";
        main.style.display = "flex";
        setTimeout(() => main.classList.add("visible"), 50);
      }, 5000);

      gradesDiv.querySelectorAll("button").forEach(btn =>
        btn.addEventListener("click", () => showUnitsScreen(btn.dataset.grade))
      );

      backToGrades.addEventListener("click", () => {
        unitsContent.classList.remove("visible");
        setTimeout(() => {
          unitsContent.style.display = "none";
          main.style.display = "flex";
          setTimeout(() => main.classList.add("visible"), 50);
        }, 500);
      });

      backToUnits.addEventListener("click", () => {
        menuContent.classList.remove("visible");
        setTimeout(() => {
          menuContent.style.display = "none";
          unitsContent.style.display = "flex";
          setTimeout(() => unitsContent.classList.add("visible"), 50);
        }, 500);
      });
    });

    function showUnitsScreen(grade) {
      main.classList.remove("visible");
      setTimeout(() => main.style.display = "none", 500);

      unitsDiv.innerHTML = "";
      unitsTitle.textContent = `Units for Grade ${grade}`;
      gradeUnitsMap[grade].forEach((name, idx) => {
        const b = document.createElement("button");
        b.textContent = name;
        b.className = "unit-button px-5 py-3 w-full text-left border-2 border-orange-500 rounded";
        b.addEventListener("click", () => showMenuScreen(grade, idx+1));
        unitsDiv.appendChild(b);
        setTimeout(() => b.classList.add("show"), idx * 100);
      });

      unitsContent.style.display = "flex";
      setTimeout(() => unitsContent.classList.add("visible"), 50);
    }

    function showMenuScreen(grade, unitIndex) {
      unitsContent.classList.remove("visible");
      setTimeout(() => unitsContent.style.display = "none", 500);

      menuTitle.textContent = `Options for Unit ${unitIndex}`;
      document.getElementById("btn-vocab").onclick = () =>
        tg.sendData(JSON.stringify({ selectGrade: grade, selectUnit: unitIndex, action: "vocabulary" }));
      document.getElementById("btn-l1").onclick = () =>
        tg.sendData(JSON.stringify({ selectGrade: grade, selectUnit: unitIndex, action: "level1" }));
      document.getElementById("btn-l2").onclick = () =>
        tg.sendData(JSON.stringify({ selectGrade: grade, selectUnit: unitIndex, action: "level2" }));
      document.getElementById("btn-l3").onclick = () =>
        tg.sendData(JSON.stringify({ selectGrade: grade, selectUnit: unitIndex, action: "level3" }));

      menuContent.style.display = "flex";
      setTimeout(() => menuContent.classList.add("visible"), 50);
    }
  </script>
</body>
</html>
