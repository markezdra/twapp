<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocab Trainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* СПЛЭШ */
    #splash {
      position: fixed; inset:0;
      display: flex; align-items:center; justify-content:center;
      background:#fff; opacity:0;
      transition:opacity 2s ease-in-out; z-index:50;
    }
    #splash.visible { opacity:1; }
    #splash.hiding { opacity:0; transition:opacity 1s ease-in-out; }

    /* Переходим к экранам */
    #mainContent, #unitsContent {
      opacity:0; transition: opacity 0.5s ease-in-out;
      display: none;
    }
    #mainContent.visible,
    #unitsContent.visible {
      display: flex;
      opacity:1;
    }

    /* Юниты: кнопки с pop‑in */
    @keyframes popIn {
      from { opacity:0; transform: scale(0.5); }
      to   { opacity:1; transform: scale(1); }
    }
    .unit-button {
      opacity:0;
    }
    .unit-button.show {
      animation: popIn 0.4s forwards;
    }
  </style>
</head>
<body class="bg-white text-orange-500 overflow-hidden">

  <!-- СПЛЭШ -->
  <div id="splash">
    <img src="logo.png" alt="Logo" class="w-32 h-auto"/>
  </div>

  <!-- ЭКРАН ВЫБОРА КЛАССА -->
  <div id="mainContent"
       class="flex flex-col items-center justify-center min-h-screen p-4">
    <h1 class="text-3xl font-bold mb-6">Select Your Grade</h1>
    <div id="grades" class="flex flex-wrap justify-center gap-4 mb-10">
      <button data-grade="5"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">5 Grade</button>
      <button data-grade="6"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">6 Grade</button>
      <button data-grade="7"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">7 Grade</button>
      <button data-grade="8"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">8 Grade</button>
      <button data-grade="9"  class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">9 Grade</button>
      <button data-grade="10" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">10 Grade</button>
      <button data-grade="11" class="px-5 py-2 border-2 border-orange-500 rounded hover:bg-orange-500 hover:text-white transition">11 Grade</button>
    </div>
  </div>

  <!-- ЭКРАН СПИСКА ЮНИТОВ -->
  <div id="unitsContent"
       class="flex flex-col items-center justify-start min-h-screen p-4 overflow-y-auto"
       style="gap:1rem">
    <h1 id="unitsTitle" class="text-3xl font-bold mb-6">Units</h1>
    <div id="units" class="flex flex-col gap-4 w-full max-w-md mx-auto mb-10">
      <!-- сюда JS вставит кнопки Unit 1…Unit N -->
    </div>
    <button id="backToGrades"
            class="mt-auto px-4 py-2 border-2 border-gray-400 rounded hover:bg-gray-200 transition">
      ← Back to Grades
    </button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Подготовка данных: по 12 юнитов для примера
    const gradeUnitsMap = {};
    for(let g=5;g<=11;g++){
      gradeUnitsMap[g] = Array.from({length:12},(_,i)=>`Unit ${i+1}`);
    }

    const splash       = document.getElementById("splash");
    const mainContent  = document.getElementById("mainContent");
    const unitsContent = document.getElementById("unitsContent");
    const grades       = document.getElementById("grades");
    const unitsDiv     = document.getElementById("units");
    const unitsTitle   = document.getElementById("unitsTitle");
    const backBtn      = document.getElementById("backToGrades");

    window.addEventListener("DOMContentLoaded",()=>{
      // 0–2s fade-in
      setTimeout(()=>splash.classList.add("visible"),0);
      // 4s start fade-out
      setTimeout(()=>{
        splash.classList.remove("visible");
        splash.classList.add("hiding");
      },4000);
      // 5s swap to mainContent
      setTimeout(()=>{
        splash.style.display='none';
        showMain();
      },5000);
    });

    // Показать выбор класса
    function showMain(){
      unitsContent.classList.remove("visible");
      unitsContent.style.display='none';
      mainContent.style.display='flex';
      setTimeout(()=>mainContent.classList.add("visible"),50);
    }

    // Показать список юнитов для grade
    function showUnits(grade){
      // очистка
      unitsDiv.innerHTML='';
      unitsTitle.textContent = `Units for Grade ${grade}`;
      // спрячем main, покажем unitsContent
      mainContent.classList.remove("visible");
      setTimeout(()=>{
        mainContent.style.display='none';
        unitsContent.style.display='flex';
        setTimeout(()=>unitsContent.classList.add("visible"),50);
        // генерим кнопки
        gradeUnitsMap[grade].forEach((name,idx)=>{
          const btn=document.createElement("button");
          btn.textContent = name;
          btn.className   = "unit-button px-5 py-3 w-full text-left border-2 border-orange-500 rounded";
          btn.onclick     = ()=>tg.sendData(JSON.stringify({grade,unit:idx+1}));
          unitsDiv.appendChild(btn);
          setTimeout(()=>btn.classList.add("show"), idx*100);
        });
      },500);
    }

    // Вешаем клики на grade-кнопки
    grades.querySelectorAll("button").forEach(btn=>{
      btn.onclick = ()=>showUnits(btn.dataset.grade);
    });

    // Кнопка «Back»
    backBtn.onclick = ()=>showMain();
  </script>
</body>
</html>
